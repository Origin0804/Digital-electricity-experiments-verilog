### 1. 实验整体要求

该实验的目标是设计并实现一个数模混合系统。你需要搭建一个模拟电路（NE555多谐振荡器）和一个数字控制/测量系统（基于EGO1 FPGA开发板）。

*   **模拟部分**：使用NE555定时器在面包板上搭建一个多谐振荡器电路，产生连续的方波信号。
*   **数字部分（FPGA）**：
    1.  **测量频率**：FPGA需要读取NE555输出的方波信号，测量其实际频率。
    2.  **显示频率**：将测量到的频率值实时显示在数码管上。
    3.  **控制频率**：FPGA通过控制DAC0832芯片输出模拟电压，该电压接入NE555的控制端（第5脚），从而改变NE555的振荡频率（压控振荡）。

**实验包含两个层级的任务：**
*   **基本任务**：手动通过拨码开关控制DAC输出电压，改变频率，观察测量结果。
*   **升级任务（选做）**：实现闭环自适应控制。FPGA自动调节DAC输出，使NE555的振荡频率稳定在老师指定的特定频率上。

---

### 2. EGO1 板卡上的功能实现细节

根据课件（特别是第5、6、8、11页），需要在EGO1 FPGA板卡上实现的具体功能如下：

#### A. 信号输入与测量 (Frequency Measurement)
*   **信号接口**：NE555的输出信号（第3脚）经过串联一个 **100Ω电阻**（用于限流保护FPGA）后，连接到EGO1板卡上的通用扩展口 **J5**，具体引脚为 **IO_L18N**。
*   **逻辑实现**：在Verilog中使用“测频法”。利用板载的 **100MHz时钟** 作为基准，定义一个固定的计数窗口（如1秒或0.1秒）。在该窗口内对输入脉冲的上升沿或下降沿进行计数，计算出频率 $f = \text{计数值} / \text{窗口时间}$。
*   **ADC说明**：虽然课件在“实验目的”中提到了掌握A/D原理，但在本实验的具体测量任务中，**使用的是数字I/O口（J5）配合内部计数器进行测频，而非使用ADC（模数转换器）对波形进行采样**。

#### B. 频率显示 (Display)
*   **硬件资源**：**4位数码管 (LED Segment Display)**。
*   **功能描述**：将FPGA内部计算出的十进制频率值（单位：Hz）进行译码，驱动板卡中部的数码管进行实时显示。例如，如果频率是1500Hz，数码管显示“1500”。

#### C. 频率控制 (DAC Control)
*   **硬件资源**：
    *   **DAC芯片**：使用EGO1板载（或通过模块连接）的 **DAC0832** 数模转换芯片。
    *   **控制开关**：板卡左下方的 **8位拨码开关 (Switches)**。
*   **功能描述**：
    *   **基本任务模式**：这8个拨码开关对应DAC0832的8位数据输入端（DI0~DI7）。
        *   当你拨动开关改变8位二进制数值时，DAC0832输出的模拟电压（VOUT）会发生变化。
        *   该VOUT连接到NE555的 **第5脚 (Control Voltage)**，从而改变NE555内部比较器的阈值电平，进而改变输出方波的频率。
    *   **升级任务模式**：拨码开关不再直接控制DAC数值（或者仅用于设置目标频率）。FPGA内部的逻辑会自动根据当前测量到的频率与目标频率的差值，动态调整发送给DAC0832的数字量，直到频率锁定。

### 总结需要操作的硬件部件：
1.  **J5 扩展口 (IO_L18N)**：接收来自NE555的方波信号（输入）。
2.  **中间的4位段码管**：显示测得的频率数字。
3.  **底部的8个拨码开关**：手动输入数据给DAC，控制输出电压。
4.  **DAC0832 模块**：受FPGA控制，输出模拟电压给NE555。