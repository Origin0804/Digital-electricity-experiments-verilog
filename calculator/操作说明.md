# 计算器操作说明书
# Calculator Operation Manual

## 快速开始 (Quick Start)

本计算器是一个交互式FPGA计算器，通过按键和拨码开关进行操作。计算过程分为4个简单步骤。

This is an interactive FPGA calculator operated through buttons and switches. The calculation process has 4 simple steps.

---

## 硬件接口 (Hardware Interface)

### 按键说明 (Button Description)
- **S0** - 左移按键 (光标向左移动)
- **S2** - 确认按键 (短按) / 小数点按键 (长按1秒)
- **S3** - 右移按键 (光标向右移动)

### 拨码开关说明 (Switch Description)
- **SW0** - 加法运算 (Addition)
- **SW1** - 减法运算 (Subtraction)
- **SW2** - 乘法运算 (Multiplication)
- **SW3** - 除法运算 (Division)
- **SW4-SW7** - 数字输入 (Digit Input, BCD码 0-9)

### 显示说明 (Display Description)
8个七段数码管从左到右依次显示:
- **第1位**: 符号 (+/-)
- **第2-8位**: 7位数字

---

## 详细操作步骤 (Detailed Operation Steps)

### 第一步: 输入第一个数字 (Step 1: Input First Number)

#### 1.1 选择输入位置 (Select Digit Position)
- 按 **S0** 向左移动光标
- 按 **S3** 向右移动光标
- 当前位置的数字会**闪烁**提示

#### 1.2 输入数字 (Enter Digit)
使用拨码开关 SW4-SW7 输入数字 (二进制转BCD):

| SW7 | SW6 | SW5 | SW4 | 显示数字 |
|-----|-----|-----|-----|----------|
| 0   | 0   | 0   | 0   | 0        |
| 0   | 0   | 0   | 1   | 1        |
| 0   | 0   | 1   | 0   | 2        |
| 0   | 0   | 1   | 1   | 3        |
| 0   | 1   | 0   | 0   | 4        |
| 0   | 1   | 0   | 1   | 5        |
| 0   | 1   | 1   | 0   | 6        |
| 0   | 1   | 1   | 1   | 7        |
| 1   | 0   | 0   | 0   | 8        |
| 1   | 0   | 0   | 1   | 9        |

**示例**: 输入数字 "123"
1. 光标移到第3位 (百位)
2. SW4-SW7设为 0001 (输入1)
3. 光标移到第2位 (十位)
4. SW4-SW7设为 0010 (输入2)
5. 光标移到第1位 (个位)
6. SW4-SW7设为 0011 (输入3)

#### 1.3 标记小数点 (Mark Decimal Point, 可选)
- 将光标移到要标记小数点的位置
- **长按S2约1秒**
- 该位置会显示小数点

**示例**: 输入 "12.5"
1. 输入数字 125
2. 将光标移到十位 (数字2的位置)
3. 长按S2标记小数点
4. 显示为 12.5

#### 1.4 确认输入 (Confirm Input)
- **短按S2** 确认第一个数字
- 进入运算选择状态

---

### 第二步: 选择运算类型 (Step 2: Select Operation)

#### 2.1 使用拨码开关选择运算 (Select Operation Using Switches)
将相应的开关拨到**上方**:

| 开关 | 运算 | 显示 |
|------|------|------|
| SW0  | 加法 | Add  |
| SW1  | 减法 | S0   |
| SW2  | 乘法 | P0   |
| SW3  | 除法 | d10  |

**注意**: 
- 只拨动一个开关
- 如果多个开关同时拨上，优先级为: SW3 > SW2 > SW1 > SW0

#### 2.2 确认运算 (Confirm Operation)
- **短按S2** 确认运算选择
- 进入第二个数字输入状态

---

### 第三步: 输入第二个数字 (Step 3: Input Second Number)

操作方式与**第一步完全相同**:
1. 使用 S0/S3 移动光标
2. 使用 SW4-SW7 输入数字
3. 可选: 长按S2标记小数点
4. 短按S2确认输入

---

### 第四步: 查看结果 (Step 4: View Result)

#### 4.1 结果显示 (Result Display)
- 计算结果自动显示在数码管上
- 如果结果为负数，第一位显示 "-"
- 如果结果为正数，第一位为空白

#### 4.2 继续计算 (Continue Calculation)
- 结果会**自动**成为下一轮计算的第一个数
- **短按S2** 开始新的计算
- 进入运算选择状态 (第二步)

#### 4.3 重新开始 (Start Over)
如果要输入新的第一个数字:
1. 在结果显示状态按S2
2. 选择任意运算
3. 再按S2进入第二个数字输入
4. 输入新数字后按S2
5. 结果显示后，按S2即可重新输入

---

## 使用示例 (Usage Examples)

### 示例1: 简单加法 123 + 456 = 579

**步骤**:
1. **输入第一个数字 123**
   - 移动光标到百位，设SW4-SW7为0001 (输入1)
   - 移动光标到十位，设SW4-SW7为0010 (输入2)
   - 移动光标到个位，设SW4-SW7为0011 (输入3)
   - 短按S2确认

2. **选择加法运算**
   - 将SW0拨到上方
   - 显示 "Add"
   - 短按S2确认

3. **输入第二个数字 456**
   - 移动光标到百位，设SW4-SW7为0100 (输入4)
   - 移动光标到十位，设SW4-SW7为0101 (输入5)
   - 移动光标到个位，设SW4-SW7为0110 (输入6)
   - 短按S2确认

4. **查看结果**
   - 显示: 579

---

### 示例2: 小数乘法 12.5 × 2 = 25

**步骤**:
1. **输入第一个数字 12.5**
   - 输入125 (方法同示例1)
   - 移动光标到十位 (数字2)
   - **长按S2约1秒**标记小数点
   - 显示: 12.5
   - 短按S2确认

2. **选择乘法运算**
   - 将SW2拨到上方
   - 显示 "P0"
   - 短按S2确认

3. **输入第二个数字 2**
   - 移动光标到个位
   - 设SW4-SW7为0010 (输入2)
   - 短按S2确认

4. **查看结果**
   - 显示: 25

---

### 示例3: 连续运算 10 + 5 - 3 = 12

**第一次计算: 10 + 5**
1. 输入10，短按S2
2. 选择SW0 (加法)，短按S2
3. 输入5，短按S2
4. 显示结果: 15

**第二次计算: 15 - 3** (15自动作为第一个数)
1. 短按S2 (使用结果15)
2. 选择SW1 (减法)，短按S2
3. 输入3，短按S2
4. 显示结果: 12

---

## 常见问题 (FAQ)

### Q1: 数字不更新怎么办?
**A**: 确保拨码开关的状态发生了**变化**。系统使用边沿检测，只在开关状态改变时更新数字。

### Q2: 如何输入小数?
**A**: 
1. 先输入完整的数字 (忽略小数点)
2. 将光标移到小数点应该在的位置
3. 长按S2约1秒标记小数点

### Q3: 光标闪烁太快或太慢?
**A**: 光标闪烁频率为2Hz (每秒2次)，这是固定的。

### Q4: 如何输入负数?
**A**: 本计算器暂不支持直接输入负数。但减法运算的结果可以是负数。

### Q5: 最大能输入多大的数字?
**A**: 最大支持7位数字，即 9999999。

### Q6: 小数精度如何?
**A**: 内部使用定点数运算，保留小数点后4位精度。

### Q7: 除以0会怎样?
**A**: 除以0时返回0，不会出错。

### Q8: 计算结果超出范围怎么办?
**A**: 超出7位显示范围的结果会被截断，只显示低位数字。

---

## 操作技巧 (Operation Tips)

1. **快速输入**: 熟练后可以不用看数码管，直接按照记忆位置输入数字

2. **验证输入**: 输入完每个数字后，留意数码管显示，确认输入正确

3. **小数点位置**: 记住小数点从右往左的位置编号:
   - 位置0: 小数点在个位后 (X.X)
   - 位置1: 小数点在十位后 (XX.X)
   - 位置2: 小数点在百位后 (XXX.X)

4. **连续运算**: 利用结果自动作为下一个数的特性，可以进行连续计算

5. **重置**: 如果输入错误，继续完成当前计算，结果出来后再重新开始

---

## 维护与保养 (Maintenance)

1. **开关维护**: 拨码开关使用后要复位，避免意外操作

2. **避免连续按压**: 按键操作后稍等一下，等待系统响应

3. **显示检查**: 如果某个数码管不亮，可能是硬件故障，需要检查

---

## 技术支持 (Technical Support)

如有技术问题，请参考技术文档 `README.md` 或联系开发者。

For technical issues, please refer to `README.md` or contact the developer.

---

**版本**: v1.0  
**更新日期**: 2025-12-09  
**适用硬件**: EGO1 FPGA开发板
